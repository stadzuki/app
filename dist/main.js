(()=>{"use strict";var t,e,n,o,r,c,a,l,i,s;a=document.querySelector("#timer-hours"),l=document.querySelector("#timer-minutes"),i=document.querySelector("#timer-seconds"),(s=function(){var t,e,n,o=(t=(new Date("25 december 2020").getTime()-(new Date).getTime())/1e3,e=Math.floor(t%60),n=Math.floor(t/60%60),{timeRemaining:t,hours:Math.floor(t/60/60),minutes:n,seconds:e});o.hours.toString().length<2?a.textContent="0"+o.hours:a.textContent=o.hours,o.minutes.toString().length<2?l.textContent="0"+o.minutes:l.textContent=o.minutes,o.seconds.toString().length<2?i.textContent="0"+o.seconds:i.textContent=o.seconds,o.timeRemaining<0&&(clearInterval(setInterval),a.textContent="00",l.textContent="00",i.textContent="00")})(),setInterval(s,1e3),o=document.querySelector("menu"),r=document.querySelector(".menu"),c=function(){screen.width>768?o.classList.toggle("active-menu"):o.style.transform&&"translate(-100%)"!==o.style.transform?o.style.transform="translate(-100%)":o.style.transform="translate(0)"},r.addEventListener("click",(function(t){t.preventDefault(),c()})),o.addEventListener("click",(function(t){t.preventDefault();var e=t.target;e.matches("li")||(e.classList.contains("close-btn")||e.closest("a")||o.classList.contains("active-menu")&&!e.classList.contains("active-menu"))&&c()})),function(){var t=document.querySelector(".popup"),e=document.querySelectorAll(".popup-btn"),n=(t.querySelector(".popup-close"),t.querySelector(".popup-content"));n.style.top="0";var o=0;e.forEach((function(e){return e.addEventListener("click",(function(e){if(t.style.display="block",window.screen.width>768)var r=setInterval((function(){if((o+=1)>=10)return clearInterval(r),o=0,1;n.style.top="".concat(o,"%")}),10)}))})),t.addEventListener("click",(function(e){var n=e.target;n===t&&(t.style.display="none"),"popup-close"===n.className&&(t.style.display="none")}))}(),t=document.querySelectorAll(".service-header-tab"),e=document.querySelectorAll(".service-tab"),t.forEach((function(n,o){return n.addEventListener("click",(function(){t.forEach((function(t){return t.classList.remove("active")})),e.forEach((function(t){return t.style.display="none"})),n.classList.add("active"),"Дизайн интерьера"===n.textContent&&(e[0].style.display="flex"),"Дизайн экстерьера"===n.textContent&&(e[1].style.display="flex"),"Визуальная анимация"===n.textContent&&(e[2].style.display="flex")}))})),function(){var t,e=document.querySelector(".portfolio-content"),n=document.querySelectorAll(".portfolio-item"),o=[],r=0;n.forEach((function(){var t=document.createElement("li");t.classList.add("dot"),document.querySelector(".portfolio-dots").appendChild(t),o.push(t)})),o[0].classList.add("dot-active");var c=function(t,e,n){t[e].classList.remove(n)},a=function(t,e,n){t[e].classList.add(n)},l=function(){c(n,r,"portfolio-item-active"),c(o,r,"dot-active"),++r>n.length-1&&(r=0),a(n,r,"portfolio-item-active"),a(o,r,"dot-active")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;t=setInterval(l,e)};i(2e3),e.addEventListener("click",(function(t){t.preventDefault();var e=t.target;e.matches(".portfolio-btn, .dot")&&(c(n,r,"portfolio-item-active"),c(o,r,"dot-active"),e.matches("#arrow-right")&&r++,e.matches("#arrow-left")&&r--,e.matches(".dot")&&o.forEach((function(t,n){t===e&&(r=n)})),r>=n.length?r=0:r<0&&(r=n.length-1),a(n,r,"portfolio-item-active"),a(o,r,"dot-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(t)})),e.addEventListener("mouseout",(function(t){t.target.matches(".portfolio-btn, .dot")&&i(2e3)}))}(),document.querySelectorAll('a[href*="#"]').forEach((function(t){return t.addEventListener("click",(function(e){e.preventDefault();var n=t.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}))})),document.querySelectorAll("img[data-img]").forEach((function(t){t.addEventListener("mouseover",(function(t){n=t.target.getAttribute("src"),t.target.src=t.target.dataset.img})),t.addEventListener("mouseout",(function(t){t.target.src=n}))})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=document.getElementById("calc"),n=document.getElementById("total"),o=e.querySelector(".calc-type"),r=e.querySelector(".calc-count"),c=e.querySelector(".calc-day"),a=function(){var a=0,l=1,i=1,s=o.options[o.selectedIndex].value,u=e.querySelector(".calc-square").value;r.value>1&&(l+=(r.value-1)/10,console.log(l)),c.value&&c.value<5?i*=2:c.value&&c.value<10&&(i*=1.5),s&&u||(n.textContent=0),s&&u&&(a=Math.floor(t*s*u*i*l),n.textContent=a)};e.addEventListener("input",(function(t){var e=t.target;e.matches("input")&&(e.value=e.value.replace(/[a-zA-ZА-Яа-я]|\s/,""))})),e.addEventListener("change",(function(t){var e=t.target;(e.matches("select")||e.matches("input"))&&a()}))}(100),document.querySelectorAll("form").forEach((function(t){!function(t){var e=document.getElementById(t),n=e.querySelectorAll("input"),o=document.createElement("div");o.style.color="red";var r=function(){setTimeout((function(){o.textContent=""}),3e3)};e.addEventListener("submit",(function(t){if(t.preventDefault(),!function(t){var e,n=!0;return t.forEach((function(t){"tel"===t.type&&((e=/^\+{1}\d{6,10}$/.test(t.value))||(n=!1)),"email"===t.type&&((e=/^[a-zA-Z.\-_]{1,64}@[a-zA-Z]{4,32}.[a-zA-Z]{2,12}$/.test(t.value))||(n=!1)),"text"===t.type&&((e=/^[А-я]+(\s?)$/.test(t.value))||(n=!1))})),e||alert("Форма заполняется неверно!"),n}(n))return alert("Форма заполнена неверно!");if(t.target.closest(".mess")&&(test=/^[А-я]([\s,!.:?\-]?)$/.test(target.value),console.log(1),!test))return alert("Форма заполнена неверно!");var c=document.querySelector(".preloader-inner");c.classList.add("preloader-active"),e.appendChild(o),o.textContent="Загрузка...";var a=new FormData(e),l={};a.forEach((function(t,e){l[e]=t})),function(t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})}(l).then((function(t){if(200!==t.status)throw new Error("network status not 200");o.textContent="Заявка успешно доставлена!",r()})).catch((function(t){o.textContent="Ошибка! Нет ответа от сервера!",console.error(t),r()})).finally((function(){e.reset(),c.classList.remove("preloader-active")}))}))}(t.id)}))})();