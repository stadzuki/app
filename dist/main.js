(()=>{"use strict";var t,e,n,o,r,a,c,i;t=document.querySelector("#timer-hours"),e=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),o=setInterval((function(){var r,a,c,i,l,s,u=(c=((r=new Date("5 november 2020").getTime())-(a=(new Date).getTime()))/1e3,i=Math.floor(c%60),l=Math.floor(c/60%60),s=Math.floor(c/60/60),!(a>r)&&{timeRemaining:c,hours:s,minutes:l,seconds:i});if(u){for(var d in u)"timeRemaining"!==d&&u[d]<=9&&(u[d]="0"+u[d]);t.textContent=u.hours,e.textContent=u.minutes,n.textContent=u.seconds}else clearInterval(o),t.textContent="00",e.textContent="00",n.textContent="00";u.timeRemaining<=0&&clearInterval(o)}),1e3),i=document.querySelector("menu"),document.body.addEventListener("click",(function(){var t=event.target;(t.closest("div .menu")||t.classList.contains("close-btn")||t.closest(".active-menu li a")||i.classList.contains("active-menu")&&!t.classList.contains("active-menu"))&&(screen.width>768?i.classList.toggle("active-menu"):i.style.transform&&"translate(-100%)"!==i.style.transform?i.style.transform="translate(-100%)":i.style.transform="translate(0)")})),function(){var t=document.querySelector(".popup"),e=document.querySelectorAll(".popup-btn"),n=(t.querySelector(".popup-close"),t.querySelector(".popup-content"));n.style.top="0";var o=0;e.forEach((function(e){return e.addEventListener("click",(function(e){if(t.style.display="block",window.screen.width>768)var r=setInterval((function(){if((o+=1)>=10)return clearInterval(r),o=0,1;n.style.top="".concat(o,"%")}),10)}))})),t.addEventListener("click",(function(e){var n=e.target;n===t&&(t.style.display="none"),"popup-close"===n.className&&(t.style.display="none")}))}(),r=document.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab"),r.forEach((function(t,e){return t.addEventListener("click",(function(){r.forEach((function(t){return t.classList.remove("active")})),a.forEach((function(t){return t.style.display="none"})),t.classList.add("active"),"Дизайн интерьера"===t.textContent&&(a[0].style.display="flex"),"Дизайн экстерьера"===t.textContent&&(a[1].style.display="flex"),"Визуальная анимация"===t.textContent&&(a[2].style.display="flex")}))})),function(){var t,e=document.querySelector(".portfolio-content"),n=document.querySelectorAll(".portfolio-item"),o=[],r=0;n.forEach((function(){var t=document.createElement("li");t.classList.add("dot"),document.querySelector(".portfolio-dots").appendChild(t),o.push(t)})),o[0].classList.add("dot-active");var a=function(t,e,n){t[e].classList.remove(n)},c=function(t,e,n){t[e].classList.add(n)},i=function(){a(n,r,"portfolio-item-active"),a(o,r,"dot-active"),++r>n.length-1&&(r=0),c(n,r,"portfolio-item-active"),c(o,r,"dot-active")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;t=setInterval(i,e)};l(2e3),e.addEventListener("click",(function(t){t.preventDefault();var e=t.target;e.matches(".portfolio-btn, .dot")&&(a(n,r,"portfolio-item-active"),a(o,r,"dot-active"),e.matches("#arrow-right")&&r++,e.matches("#arrow-left")&&r--,e.matches(".dot")&&o.forEach((function(t,n){t===e&&(r=n)})),r>=n.length?r=0:r<0&&(r=n.length-1),c(n,r,"portfolio-item-active"),c(o,r,"dot-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(t)})),e.addEventListener("mouseout",(function(t){t.target.matches(".portfolio-btn, .dot")&&l(2e3)}))}(),document.querySelectorAll('a[href*="#"]').forEach((function(t){return t.addEventListener("click",(function(e){e.preventDefault();var n=t.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}))})),document.querySelectorAll("img[data-img]").forEach((function(t){t.addEventListener("mouseover",(function(t){c=t.target.getAttribute("src"),t.target.src=t.target.dataset.img})),t.addEventListener("mouseout",(function(t){t.target.src=c}))})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=document.getElementById("calc"),n=document.getElementById("total"),o=e.querySelector(".calc-type"),r=e.querySelector(".calc-count"),a=e.querySelector(".calc-day"),c=function(){var c=0,i=1,l=1,s=o.options[o.selectedIndex].value,u=e.querySelector(".calc-square").value;r.value>1&&(i+=(r.value-1)/10,console.log(i)),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),s&&u&&(c=Math.floor(t*s*u*l*i),function t(){var e=requestAnimationFrame((function(){if(+n.textContent>c?n.textContent=0:+n.textContent<c&&(n.textContent=+n.textContent+1),+n.textContent===c)return cancelAnimationFrame(e);t()}))}())};e.addEventListener("input",(function(t){var e=t.target;e.matches("input")&&(e.value=e.value.replace(/[a-zA-ZА-Яа-я]|\s/,""))})),e.addEventListener("change",(function(t){var e=t.target;(e.matches("select")||e.matches("input"))&&c()}))}(100),document.querySelectorAll("form").forEach((function(t){var e,n,o,r;e=t.id,n=document.getElementById(e),o=n.querySelectorAll("input"),(r=document.createElement("div")).style.color="red",n.addEventListener("submit",(function(t){if(t.preventDefault(),a=!0,o.forEach((function(t){"tel"===t.type&&((e=/^(\+{1})(\d+)$/.test(t.value))||(a=!1)),"text"===t.type&&((e=/[А-я](\s?)/.test(t.value))||(a=!1))})),e||alert("Форма заполняется неверно!"),!a)return alert("Форма заполнена неверно!");var e,a,c=document.querySelector(".preloader-inner");c.classList.add("preloader-active"),n.appendChild(r),r.textContent="Загрузка...";var i=new FormData(n),l={};i.forEach((function(t,e){l[e]=t})),function(t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})}(l).then((function(t){if(200!==t.status)throw new Error("network status not 200");r.textContent="Заявка успешно доставлена!"})).catch((function(t){r.textContent="Ошибка! Нет ответа от сервера!",console.error(t)})).finally((function(){n.reset(),c.classList.remove("preloader-active")}))}))}))})();